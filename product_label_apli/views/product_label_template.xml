<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Template 4x11 con precio -->
    <template id="report_producttemplatelabel4x11">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="product">
                <t t-set="quantity" t-value="quantity if quantity else 1"/>
                <div class="page">
                    <style>
                        @page {
                            size: A4;
                            margin: 2mm;
                        }
                        body {
                            font-family: Arial, sans-serif;
                        }
                        .label-page {
                            width: 206mm;
                            height: 293mm;
                            display: flex;
                            flex-wrap: wrap;
                            justify-content: space-between;
                            align-content: space-between;
                            padding: 0;
                            margin: 0;
                        }
                        .product-label {
                            width: 48mm;
                            height: 25.4mm;
                            border: 0.5px solid #ccc;
                            box-sizing: border-box;
                            padding: 1mm;
                            display: flex;
                            flex-direction: column;
                            justify-content: center;
                            align-items: center;
                            text-align: center;
                            margin-bottom: 1.5mm;
                            page-break-inside: avoid;
                        }
                        .product-name {
                            font-weight: bold;
                            font-size: 8pt;
                            margin-bottom: 0.5mm;
                            overflow: hidden;
                            text-overflow: ellipsis;
                            max-width: 100%;
                            line-height: 1.1;
                        }
                        .product-code {
                            font-size: 7pt;
                            color: #666;
                            margin-bottom: 0.5mm;
                        }
                        .product-barcode {
                            margin: 0.5mm 0;
                            max-height: 12mm;
                        }
                        .product-barcode img {
                            max-width: 45mm;
                            max-height: 12mm;
                            height: auto;
                        }
                        .product-price {
                            font-size: 11pt;
                            font-weight: bold;
                            color: #000;
                            margin-top: 0.5mm;
                        }
                    </style>
                    
                    <div class="label-page">
                        <t t-foreach="range(int(quantity))" t-as="q">
                            <div class="product-label">
                                <div class="product-name">
                                    <t t-esc="product.name"/>
                                </div>
                                
                                <div class="product-code" t-if="product.default_code">
                                    <t t-esc="product.default_code"/>
                                </div>
                                
                                <div class="product-barcode" t-if="product.barcode">
                                    <img t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('EAN13', product.barcode, 180, 50)"/>
                                </div>
                                
                                <div class="product-price">
                                    <t t-esc="product.list_price" t-options="{'widget': 'monetary', 'display_currency': product.currency_id}"/>
                                </div>
                            </div>
                        </t>
                        
                        <!-- Rellenar hasta 44 etiquetas -->
                        <t t-set="total_product_labels" t-value="int(quantity)"/>
                        <t t-set="labels_in_page" t-value="44"/>
                        <t t-set="empty_count" t-value="labels_in_page - (total_product_labels % labels_in_page) if total_product_labels % labels_in_page != 0 else 0"/>
                        <t t-foreach="range(int(empty_count))" t-as="e">
                            <div class="product-label" style="border: none; visibility: hidden;"/>
                        </t>
                    </div>
                </div>
            </t>
        </t>
    </template>
</odoo>
